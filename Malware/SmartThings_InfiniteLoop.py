import pip

# Install required modules
modules = ["pyst", "pySmartThings", "pySmartThingsHub"]

for module in modules:
    pip.main(['install', module])

# Scan for a Samsung Smartthings Hub
from pyst import SmartThings

hub = SmartThings.discover()

# Attach to it
hub.connect()

# Turn all connected devices on and off sequentially in a loop infinitely
while True:
    for device in hub.devices:
        device.turn_on()
    for device in hub.devices:
        device.turn_off()